@model Manhaj.Models.Lecture
@{
    ViewData["Title"] = "ุชุนุฏูู ุงููุญุงุถุฑุฉ";
}

<section class="section" style="background: var(--background-gray); min-height: 80vh; padding: 40px 20px;">
    <div style="max-width: 800px; margin: 0 auto;">
        <div class="dashboard-card">
            <h2 class="section-title" style="text-align: center; margin-bottom: 30px;">ุชุนุฏูู ุงููุญุงุถุฑุฉ</h2>
            
            <form asp-action="Edit" asp-route-id="@Model.Id" method="post">
                <input type="hidden" name="CourseID" value="@Model.CourseID" />
                
                <div class="form-group">
                    <label class="form-label">ุนููุงู ุงููุญุงุถุฑุฉ</label>
                    <input type="text" name="Title" class="form-input" value="@Model.Title" required />
                </div>

                <div class="form-group">
                    <label class="form-label">ูุตู ุงููุญุงุถุฑุฉ</label>
                    <textarea name="Description" class="form-textarea" rows="4" required>@Model.Description</textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">ุฑุงุจุท ุงูููุฏูู</label>
                    <input type="url" name="VideoUrl" class="form-input" value="@Model.VideoUrl" dir="ltr" style="text-align: left;" required />
                </div>

                <div style="display: flex; gap: 15px; margin-top: 20px;">
                    <button type="submit" class="btn btn-primary" style="flex: 1; font-size: 18px;">
                        ุญูุธ ุงูุชุนุฏููุงุช
                    </button>
                    <a asp-controller="Teacher" asp-action="Course" asp-route-id="@Model.CourseID" 
                       class="btn btn-outline" style="flex: 1; border: 2px solid var(--text-secondary); color: var(--text-secondary); text-align: center; line-height: 45px; text-decoration: none;">
                        ุฅูุบุงุก
                    </a>
                </div>
            </form>

            <hr style="margin: 30px 0; border: none; border-top: 1px solid #e0e0e0;" />

            <h3 style="margin-bottom: 20px;">ุงูููุงุฏ ุงูุชุนููููุฉ</h3>

            <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <h4 style="margin-bottom: 15px; font-size: 16px;">ุฅุถุงูุฉ ููู ุฌุฏูุฏ</h4>
                <form asp-action="AddMaterial" method="post" enctype="multipart/form-data">
                    <input type="hidden" name="lectureId" value="@Model.Id" />
                    
                    <div class="form-group">
                        <label class="form-label">ุนููุงู ุงูููู</label>
                        <input type="text" name="title" class="form-input" placeholder="ูุซุงู: ููุฎุต ุงููุญุงุถุฑุฉ PDF" required />
                    </div>

                    <div class="form-group">
                        <label class="form-label">ุงุฎุชูุงุฑ ุงูููู</label>
                        <input type="file" name="file" class="form-control" required />
                    </div>

                    <button type="submit" class="btn btn-secondary" style="margin-top: 10px;">
                        ๐ค ุฑูุน ุงูููู
                    </button>
                </form>
            </div>

            @if (Model.Materials != null && Model.Materials.Any())
            {
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    @foreach (var material in Model.Materials)
                    {
                        <div style="display: flex; justify-content: space-between; align-items: center; background: white; padding: 15px; border: 1px solid #eee; border-radius: 8px;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 20px;">๐</span>
                                <div>
                                    <div style="font-weight: 600;">@material.Title</div>
                                    <div style="font-size: 12px; color: var(--text-secondary);">@material.Filetype</div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 10px;">
                                <a href="~/@material.FilePath" target="_blank" class="btn btn-sm btn-outline-primary">
                                    ุชุญููู
                                </a>
                                <form asp-action="DeleteMaterial" asp-route-id="@material.Id" method="post" onsubmit="return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงููููุ');" style="display: inline;">
                                    <button type="submit" class="btn btn-sm btn-outline-danger">
                                        ุญุฐู
                                    </button>
                                </form>
                            </div>
                        </div>
                    }
                </div>
            }
            else
            {
                <p style="text-align: center; color: var(--text-secondary);">ูุง ุชูุฌุฏ ููุงุฏ ุชุนููููุฉ ูุฑููุฉ</p>
            }

            <hr style="margin: 30px 0; border: none; border-top: 1px solid #e0e0e0;" />

            <form asp-action="Delete" asp-route-id="@Model.Id" method="post" onsubmit="return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐู ุงููุญุงุถุฑุฉุ');">
                <button type="submit" class="btn" style="width: 100%; background: #dc3545; color: white;">
                    ๐๏ธ ุญุฐู ุงููุญุงุถุฑุฉ
                </button>
            </form>
        </div>
    </div>
</section>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
