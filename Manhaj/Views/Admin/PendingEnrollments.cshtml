@model IEnumerable<Manhaj.Models.Course_Registration>
@{
    ViewData["Title"] = "ุทูุจุงุช ุงูุชุณุฌูู ุงููุนููุฉ";
    Layout = "_DashboardLayout";
}

<section class="section" style="background: var(--background-gray); min-height: 80vh; padding: 40px 20px;">
    <div style="max-width: 1200px; margin: 0 auto;">
        <div class="section-header">
            <h2 class="section-title">ุทูุจุงุช ุงูุชุณุฌูู ุงููุนููุฉ</h2>
            <p class="section-subtitle">ูุฑุงุฌุนุฉ ุฅุซุจุงุชุงุช ุงูุฏูุน ูุงูููุงููุฉ ุนูู ุงูุทูุงุจ</p>
        </div>

        <div class="dashboard-card">
            @if (Model.Any())
            {
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: var(--background-gray); font-weight: 600;">
                                <th style="padding: 12px; text-align: right;">ุงูุทุงูุจ</th>
                                <th style="padding: 12px; text-align: right;">ุงูุฏูุฑุฉ</th>
                                <th style="padding: 12px; text-align: right;">ุงูุณุนุฑ</th>
                                <th style="padding: 12px; text-align: right;">ุชุงุฑูุฎ ุงูุทูุจ</th>
                                <th style="padding: 12px; text-align: center;">ุฅุซุจุงุช ุงูุฏูุน</th>
                                <th style="padding: 12px; text-align: center;">ุงูุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr style="border-bottom: 1px solid #e0e0e0;">
                                    <td style="padding: 12px;">
                                        <div style="font-weight: 600;">@item.Student.FirstName @item.Student.LastName</div>
                                        <div style="font-size: 12px; color: var(--text-secondary);">@item.Student.Email</div>
                                    </td>
                                    <td style="padding: 12px;">@item.Course.Title</td>
                                    <td style="padding: 12px;">@item.Course.Price.ToString("N0") ุฌููู</td>
                                    <td style="padding: 12px;">@item.Registration_Date.ToString("yyyy-MM-dd HH:mm")</td>
                                    <td style="padding: 12px; text-align: center;">
                                        @if (!string.IsNullOrEmpty(item.PaymentProofPath))
                                        {
                                            <a href="@item.PaymentProofPath" target="_blank" class="btn btn-outline" style="padding: 5px 10px; font-size: 12px;">
                                                ๐๏ธ ุนุฑุถ ุงูุตูุฑุฉ
                                            </a>
                                        }
                                        else
                                        {
                                            <span style="color: var(--text-secondary);">ูุง ููุฌุฏ</span>
                                        }
                                    </td>
                                    <td style="padding: 12px; text-align: center;">
                                        <div style="display: flex; gap: 10px; justify-content: center;">
                                            <form asp-action="ApproveEnrollment" method="post" style="display: inline;">
                                                <input type="hidden" name="studentId" value="@item.StudentID" />
                                                <input type="hidden" name="courseId" value="@item.CourseID" />
                                                <button type="submit" class="btn btn-primary" style="padding: 5px 15px; background: #28a745; border-color: #28a745;">
                                                    โ ูุจูู
                                                </button>
                                            </form>
                                            <form asp-action="RejectEnrollment" method="post" style="display: inline;">
                                                <input type="hidden" name="studentId" value="@item.StudentID" />
                                                <input type="hidden" name="courseId" value="@item.CourseID" />
                                                <button type="submit" class="btn btn-primary" style="padding: 5px 15px; background: #dc3545; border-color: #dc3545;" onclick="return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุฑูุถ ูุฐุง ุงูุทูุจุ');">
                                                    โ ุฑูุถ
                                                </button>
                                            </form>
                                        </div>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            }
            else
            {
                <div style="text-align: center; padding: 40px;">
                    <p style="color: var(--text-secondary); margin-bottom: 20px;">ูุง ุชูุฌุฏ ุทูุจุงุช ุชุณุฌูู ูุนููุฉ ุญุงููุงู</p>
                        <a asp-action="Dashboard" class="btn btn-secondary"  style="text-decoration:none;">ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ</a>
                </div>
            }
        </div>
    </div>
</section>
